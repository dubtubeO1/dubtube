# yt-dlp: use edge (git master) instead of nix stable to fix YouTube nsig/player JS breakage.
[phases.setup]
nixPkgs = ["nodejs_18", "python311", "ffmpeg"]

[phases.install]
cmds = [
  "npm install",
  "python -m pip install --upgrade 'git+https://github.com/yt-dlp/yt-dlp.git'"
]

[phases.build]
cmds = ["npm run build"]

[start]
cmd = "npm start"

[variables]
NODE_ENV = "production"